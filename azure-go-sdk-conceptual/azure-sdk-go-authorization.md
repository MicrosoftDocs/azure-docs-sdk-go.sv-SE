---
title: Autentisering med Azure SDK för Go
description: Lär dig mer om autentiseringsmetoder som är tillgängliga i Azure SDK för Go och hur de används.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 09/05/2018
ms.topic: conceptual
ms.technology: azure-sdk-go
ms.devlang: go
ms.component: authentication
ms.openlocfilehash: f5c2c56e43828f0bedad0b5781dc71991ce1fd3e
ms.sourcegitcommit: 172f81dd6e4c6a275dc8031815aa87cdb488cbf0
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 09/26/2018
ms.locfileid: "47231683"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="fae42-103">Autentiseringsmetoder i Azure SDK för Go</span><span class="sxs-lookup"><span data-stu-id="fae42-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="fae42-104">Med Azure SDK för Go får du flera olika sätt att autentisera med Azure.</span><span class="sxs-lookup"><span data-stu-id="fae42-104">The Azure SDK for Go offers multiple ways to authenticate with Azure.</span></span> <span data-ttu-id="fae42-105">De här _typerna_ av autentisering kan anropas genom olika _autentiseringsmetoder_.</span><span class="sxs-lookup"><span data-stu-id="fae42-105">These authentication _types_ are invoked through different authentication _methods_.</span></span> <span data-ttu-id="fae42-106">I den här artikeln beskrivs tillgängliga typer, metoder och hur du väljer vad som är bäst för ditt program.</span><span class="sxs-lookup"><span data-stu-id="fae42-106">This article covers the available types, methods, and how to choose which are best for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="fae42-107">Tillgängliga autentiseringstyper och metoder</span><span class="sxs-lookup"><span data-stu-id="fae42-107">Available authentication types and methods</span></span>

<span data-ttu-id="fae42-108">Azure SDK för Go erbjuder flera olika typer av autentisering som använder olika uppsättningar autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="fae42-108">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="fae42-109">Var och en av de här autentiseringstyperna är tillgängliga via olika autentiseringsmetoder. Det är så SDK tar de här autentiseringsuppgifterna som indata.</span><span class="sxs-lookup"><span data-stu-id="fae42-109">Each authentication type is available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="fae42-110">I följande tabell beskrivs de tillgängliga typerna av autentisering och situationer där de rekommenderas att användas av ditt program.</span><span class="sxs-lookup"><span data-stu-id="fae42-110">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="fae42-111">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="fae42-111">Authentication type</span></span> | <span data-ttu-id="fae42-112">Rekommenderas när...</span><span class="sxs-lookup"><span data-stu-id="fae42-112">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="fae42-113">Certifikatbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="fae42-113">Certificate-based authentication</span></span> | <span data-ttu-id="fae42-114">Du har ett X509-certifikat som har konfigurerats för en användare av Azure Active Directory (AAD) eller tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="fae42-114">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="fae42-115">Läs [Komma igång med certifikatbaserad autentisering i Azure Active Directory] för att lära dig mer.</span><span class="sxs-lookup"><span data-stu-id="fae42-115">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="fae42-116">Klientautentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="fae42-116">Client credentials</span></span> | <span data-ttu-id="fae42-117">Du har ett konfigurerat huvudnamn för tjänsten som har konfigurerats för det här programmet eller en klass av program som det tillhör.</span><span class="sxs-lookup"><span data-stu-id="fae42-117">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="fae42-118">Läs [Skapa ett huvudnamn för tjänsten med Azure CLI] för att lära dig mer.</span><span class="sxs-lookup"><span data-stu-id="fae42-118">To learn more, see [Create a service principal with Azure CLI].</span></span> |
| <span data-ttu-id="fae42-119">Hanterade identiteter för Azure-resurser</span><span class="sxs-lookup"><span data-stu-id="fae42-119">Managed identities for Azure resources</span></span> | <span data-ttu-id="fae42-120">Programmet körs på en Azure-resurs som har konfigurerats med en hanterad identitet.</span><span class="sxs-lookup"><span data-stu-id="fae42-120">Your application is running on an Azure resource that has been configured with a managed identity.</span></span> <span data-ttu-id="fae42-121">Mer information finns i [Hanterade identiteter för Azure-resurser].</span><span class="sxs-lookup"><span data-stu-id="fae42-121">To learn more, see [Managed identities for Azure resources].</span></span> |
| <span data-ttu-id="fae42-122">Enhetstoken</span><span class="sxs-lookup"><span data-stu-id="fae42-122">Device token</span></span> | <span data-ttu-id="fae42-123">Programmet är avsett att __endast__ användas interaktivt.</span><span class="sxs-lookup"><span data-stu-id="fae42-123">Your application is meant to be used interactively __only__.</span></span> <span data-ttu-id="fae42-124">Användare kan ha aktiverat multifaktorautentisering.</span><span class="sxs-lookup"><span data-stu-id="fae42-124">Users may have multi-factor authentication enabled.</span></span> <span data-ttu-id="fae42-125">Användare har åtkomst till en webbläsare för att logga in.</span><span class="sxs-lookup"><span data-stu-id="fae42-125">Users have access to a web browser to sign in.</span></span> <span data-ttu-id="fae42-126">Mer information finns i [Använda autentisering med enhetstoken](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="fae42-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="fae42-127">Användarnamn/lösenord</span><span class="sxs-lookup"><span data-stu-id="fae42-127">Username/password</span></span> | <span data-ttu-id="fae42-128">Du har ett interaktivt program som inte kan använda någon annan autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="fae42-128">You have an interactive application that can't use any other authentication method.</span></span> <span data-ttu-id="fae42-129">Användarna har inte aktiverat multifaktorautentisering för sin AAD-inloggning.</span><span class="sxs-lookup"><span data-stu-id="fae42-129">Your users don't have multi-factor authentication enabled for their AAD sign-in.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="fae42-130">Om du använder en autentiseringstyp som skiljer sig från klientens autentiseringsuppgifter måste programmet registreras i Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fae42-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="fae42-131">Läs [Integrera program med Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications) för att lära dig hur.</span><span class="sxs-lookup"><span data-stu-id="fae42-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>
>
> [!NOTE]
> <span data-ttu-id="fae42-132">Om du inte har särskilda krav bör du undvika autentisering med användarnamn/lösenord.</span><span class="sxs-lookup"><span data-stu-id="fae42-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="fae42-133">I situationer där användarbaserad inloggning är lämpligt används vanligtvis autentisering med enhetstoken i stället.</span><span class="sxs-lookup"><span data-stu-id="fae42-133">In situations where user-based sign in is appropriate, device token authentication can usually be used instead.</span></span>

[Komma igång med certifikatbaserad autentisering i Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Skapa ett huvudnamn för tjänsten med Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Hanterade identiteter för Azure-resurser]: /azure/active-directory/managed-identities-azure-resources/overview
[Managed identities for Azure resources]: /azure/active-directory/managed-identities-azure-resources/overview

<span data-ttu-id="fae42-137">De här typerna av autentisering är tillgängliga via olika metoder.</span><span class="sxs-lookup"><span data-stu-id="fae42-137">These authentication types are available through different methods.</span></span>

* <span data-ttu-id="fae42-138">[_Miljöbaserad autentisering_](#use-environment-based-authentication) läser autentiseringsuppgifter direkt från programmets miljö.</span><span class="sxs-lookup"><span data-stu-id="fae42-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span>
* <span data-ttu-id="fae42-139">[_Filbaserad autentisering_](#use-file-based-authentication) läser in en fil som innehåller autentiseringsuppgifter för tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="fae42-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span>
* <span data-ttu-id="fae42-140">[_Klientbaserad autentisering_](#use-an-authentication-client) använder ett objekt i kod och gör att du ansvarar för att tillhandahålla autentiseringsuppgifterna när programmet körs.</span><span class="sxs-lookup"><span data-stu-id="fae42-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in code and makes you responsible for providing the credentials during program execution.</span></span>
* <span data-ttu-id="fae42-141">[_Autentisering med enhetstoken_ ](#use-device-token-authentication) kräver att användare loggar in interaktivt via en webbläsare med en token.</span><span class="sxs-lookup"><span data-stu-id="fae42-141">[_Device token authentication_](#use-device-token-authentication) requires users to sign in interactively through a web browser with a token.</span></span>

<span data-ttu-id="fae42-142">Alla autentiseringsfunktioner och -typer är tillgängliga i paketet `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="fae42-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="fae42-143">Om du inte har särskilda krav bör du undvika klientbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="fae42-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="fae42-144">Den här metoden för autentisering uppmanar användarna att använda dåliga metoder.</span><span class="sxs-lookup"><span data-stu-id="fae42-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="fae42-145">I synnerhet gör klientbaserad autentisering det lockande att hårdkoda autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="fae42-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="fae42-146">Att skriva anpassad kod för autentisering kan också sluta fungera efter att kommande SDK-versioner har släppts om de ändrar kraven för autentisering.</span><span class="sxs-lookup"><span data-stu-id="fae42-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="fae42-147">Använda miljö för autentisering</span><span class="sxs-lookup"><span data-stu-id="fae42-147">Use environment-based authentication</span></span>

<span data-ttu-id="fae42-148">Om du kör programmet i en kontrollerad miljö är miljöbaserad autentisering det naturliga valet.</span><span class="sxs-lookup"><span data-stu-id="fae42-148">If you're running your application in a controlled setting, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="fae42-149">Med den här autentiseringsmetoden kan du konfigurera gränssnittsmiljön innan du kör programmet.</span><span class="sxs-lookup"><span data-stu-id="fae42-149">With this authentication method, you configure the shell environment before running your application.</span></span> <span data-ttu-id="fae42-150">Vid körning läser Go-SDK dessa miljövariabler för att autentisera med Azure.</span><span class="sxs-lookup"><span data-stu-id="fae42-150">At runtime, the Go SDK reads these environment variables to authenticate with Azure.</span></span>

<span data-ttu-id="fae42-151">Miljöbaserad autentisering har stöd för alla autentiseringsmetoder förutom enhetstoken och utvärderas i följande ordning:</span><span class="sxs-lookup"><span data-stu-id="fae42-151">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order:</span></span>

* <span data-ttu-id="fae42-152">Klientautentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="fae42-152">Client credentials</span></span>
* <span data-ttu-id="fae42-153">X509-certifikat</span><span class="sxs-lookup"><span data-stu-id="fae42-153">X509 certificates</span></span>
* <span data-ttu-id="fae42-154">Användarnamn/lösenord</span><span class="sxs-lookup"><span data-stu-id="fae42-154">Username/password</span></span>
* <span data-ttu-id="fae42-155">Hanterade identiteter för Azure-resurser</span><span class="sxs-lookup"><span data-stu-id="fae42-155">Managed identities for Azure resources</span></span>

<span data-ttu-id="fae42-156">Om en autentiseringstyp har odefinierade värden eller nekas försöker SDK automatiskt nästa autentiseringstyp.</span><span class="sxs-lookup"><span data-stu-id="fae42-156">If an authentication type has unset values or is refused, the SDK automatically tries the next authentication type.</span></span> <span data-ttu-id="fae42-157">SDK returnerar ett fel när det inte finns fler typer.</span><span class="sxs-lookup"><span data-stu-id="fae42-157">When no more types are available to try, the SDK returns an error.</span></span>

<span data-ttu-id="fae42-158">I följande tabell beskrivs miljövariabler som måste anges för varje autentiseringstyp som stöds av miljöbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="fae42-158">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="fae42-159">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="fae42-159">Authentication type</span></span> | <span data-ttu-id="fae42-160">Miljövariabel</span><span class="sxs-lookup"><span data-stu-id="fae42-160">Environment variable</span></span> | <span data-ttu-id="fae42-161">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="fae42-161">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="fae42-162">__Klientautentiseringsuppgifter__</span><span class="sxs-lookup"><span data-stu-id="fae42-162">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="fae42-163">ID för Active Directory-klientorganisationen som tjänstens huvudnamn tillhör.</span><span class="sxs-lookup"><span data-stu-id="fae42-163">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="fae42-164">Namn eller ID för tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="fae42-164">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="fae42-165">Hemligheten som är associerad med tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="fae42-165">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="fae42-166">__Certifikat__</span><span class="sxs-lookup"><span data-stu-id="fae42-166">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="fae42-167">ID för Active Directory-klientorganisationen som certifikatet är registrerat i.</span><span class="sxs-lookup"><span data-stu-id="fae42-167">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="fae42-168">Programmets klient-ID som är associerat med certifikatet.</span><span class="sxs-lookup"><span data-stu-id="fae42-168">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="fae42-169">Sökvägen till klientcertifikatfilen.</span><span class="sxs-lookup"><span data-stu-id="fae42-169">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="fae42-170">Lösenordet för klientcertifikatet.</span><span class="sxs-lookup"><span data-stu-id="fae42-170">The password for the client certificate.</span></span> |
| <span data-ttu-id="fae42-171">__Användarnamn/lösenord__</span><span class="sxs-lookup"><span data-stu-id="fae42-171">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="fae42-172">ID för Active Directory-klientorganisationen som användaren tillhör.</span><span class="sxs-lookup"><span data-stu-id="fae42-172">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="fae42-173">Programmets klients-ID.</span><span class="sxs-lookup"><span data-stu-id="fae42-173">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="fae42-174">Användarnamnet som används för att logga in.</span><span class="sxs-lookup"><span data-stu-id="fae42-174">The username to sign in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="fae42-175">Lösenordet som används för att logga in.</span><span class="sxs-lookup"><span data-stu-id="fae42-175">The password to sign in with.</span></span> |
| <span data-ttu-id="fae42-176">__Hanterad identitet__</span><span class="sxs-lookup"><span data-stu-id="fae42-176">__Managed identity__</span></span> | | <span data-ttu-id="fae42-177">Autentiseringsuppgifter behövs inte för autentisering av hanterad identitet.</span><span class="sxs-lookup"><span data-stu-id="fae42-177">No credentials are needed for managed identity authentication.</span></span> <span data-ttu-id="fae42-178">Programmet måste köras på en Azure-resurs som har konfigurerats för att använda hanterade identiteter.</span><span class="sxs-lookup"><span data-stu-id="fae42-178">The application must be running on an Azure resource configured to use managed identities.</span></span> <span data-ttu-id="fae42-179">Information finns i [Hanterade identiteter för Azure-resurser].</span><span class="sxs-lookup"><span data-stu-id="fae42-179">For details, see [Managed identities for Azure resources].</span></span> |

<span data-ttu-id="fae42-180">Om du behöver ansluta till ett moln eller en hanteringsslutpunkt annat än det offentliga Azure-moln som är standard kan du ange följande miljövariabler.</span><span class="sxs-lookup"><span data-stu-id="fae42-180">To connect to a cloud or management endpoint other than the default Azure public cloud, set the following environment variables.</span></span> <span data-ttu-id="fae42-181">De vanligaste orsakerna är att du använder Azure Stack, ett moln i en annan geografisk region eller den klassiska distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="fae42-181">The most common reasons are if you use Azure Stack, a cloud in a different geographic region, or the classic deployment model.</span></span>

| <span data-ttu-id="fae42-182">Miljövariabel</span><span class="sxs-lookup"><span data-stu-id="fae42-182">Environment variable</span></span> | <span data-ttu-id="fae42-183">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="fae42-183">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="fae42-184">Namnet på molnmiljön som användaren ska ansluta till.</span><span class="sxs-lookup"><span data-stu-id="fae42-184">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="fae42-185">Resurs-ID för Active Directory som ska användas vid anslutning, som en URI till hanteringsslutpunkten.</span><span class="sxs-lookup"><span data-stu-id="fae42-185">The Active Directory resource ID to use when connecting, as a URI to your management endpoint.</span></span> |

<span data-ttu-id="fae42-186">När du använder miljöbaserad autentisering anropar du funktionen [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) för att hämta ditt authorizer-objekt.</span><span class="sxs-lookup"><span data-stu-id="fae42-186">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="fae42-187">Det här objektet konfigureras i egenskapen `Authorizer` för klienter för att ge dem åtkomst till Azure.</span><span class="sxs-lookup"><span data-stu-id="fae42-187">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="fae42-188">Autentisering på Azure Stack</span><span class="sxs-lookup"><span data-stu-id="fae42-188">Authentication on Azure Stack</span></span>

<span data-ttu-id="fae42-189">Om du vill autentisera på Azure Stack måste du ange följande variabler:</span><span class="sxs-lookup"><span data-stu-id="fae42-189">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="fae42-190">Miljövariabel</span><span class="sxs-lookup"><span data-stu-id="fae42-190">Environment variable</span></span> | <span data-ttu-id="fae42-191">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="fae42-191">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="fae42-192">Azure Active Directory-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="fae42-192">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="fae42-193">Resurs-ID:t för Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fae42-193">The Active Directory resource ID.</span></span> |

<span data-ttu-id="fae42-194">Dessa variabler kan hämtas från Azure Stack-metadatainformationen.</span><span class="sxs-lookup"><span data-stu-id="fae42-194">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="fae42-195">Om du vill hämta metadata öppnar du en webbläsare i Azure Stack-miljön och använder URL:en: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span><span class="sxs-lookup"><span data-stu-id="fae42-195">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="fae42-196">`ResourceManagerURL` varierar beroende på regionsnamnet, datornamnet och det fullständiga domännamnet för Azure Stack-distributionen:</span><span class="sxs-lookup"><span data-stu-id="fae42-196">The `ResourceManagerURL` varies based on the region name, machine name, and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="fae42-197">Miljö</span><span class="sxs-lookup"><span data-stu-id="fae42-197">Environment</span></span> | <span data-ttu-id="fae42-198">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="fae42-198">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="fae42-199">Development Kit</span><span class="sxs-lookup"><span data-stu-id="fae42-199">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="fae42-200">Integrerade system</span><span class="sxs-lookup"><span data-stu-id="fae42-200">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="fae42-201">Mer information om hur du använder Azure SDK för Go på Azure Stack finns i [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go) (Använda API-versionsprofiler med Go i Azure Stack)</span><span class="sxs-lookup"><span data-stu-id="fae42-201">For more information on how to use the Azure SDK for Go on Azure Stack, see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>

## <a name="use-file-based-authentication"></a><span data-ttu-id="fae42-202">Använd filbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="fae42-202">Use file-based authentication</span></span>

<span data-ttu-id="fae42-203">Filbaserad autentisering använder ett filformat som genererats av [Azure CLI](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="fae42-203">File-based authentication uses a file format generated by [the Azure CLI](/cli/azure).</span></span> <span data-ttu-id="fae42-204">Du kan enkelt skapa den här filen när du skapar en ny tjänstens huvudnamn med parametern `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="fae42-204">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="fae42-205">Se till att det här argumentet anges när du skapar ett huvudnamn för tjänsten om du tänker använda filbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="fae42-205">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="fae42-206">Eftersom CLI skriver utdata till `stdout` kan du dirigera om utdata till en fil.</span><span class="sxs-lookup"><span data-stu-id="fae42-206">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="fae42-207">Ange miljövariabeln `AZURE_AUTH_LOCATION` till platsen där auktoriseringsfilen lagras.</span><span class="sxs-lookup"><span data-stu-id="fae42-207">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="fae42-208">Den här miljövariabeln läses av programmet och autentiseringsuppgifterna i den parsas.</span><span class="sxs-lookup"><span data-stu-id="fae42-208">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="fae42-209">Om du måste välja auktoriseringsfilen vid körning kan du ändra programmets miljö med hjälp av funktionen [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="fae42-209">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="fae42-210">För att läsa in autentiseringsinformationen anropar du funktionen [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="fae42-210">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="fae42-211">Till skillnad från miljöbaserad auktorisering kräver filbaserad auktorisering en resursslutpunkt.</span><span class="sxs-lookup"><span data-stu-id="fae42-211">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="fae42-212">Mer information om hur du använder huvudnamn för tjänster och hanterar deras åtkomstbehörigheter finns i [Skapa ett huvudnamn för tjänsten med Azure CLI].</span><span class="sxs-lookup"><span data-stu-id="fae42-212">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="fae42-213">Använda autentisering med enhetstoken</span><span class="sxs-lookup"><span data-stu-id="fae42-213">Use device token authentication</span></span>

<span data-ttu-id="fae42-214">Om du vill att användarna ska logga in interaktivt är det bästa sättet via autentisering med enhetstoken.</span><span class="sxs-lookup"><span data-stu-id="fae42-214">If you want users to sign in interactively, the best way is through device token authentication.</span></span> <span data-ttu-id="fae42-215">Med det här autentiseringsflödet skickas en token till användaren som sedan klistrar in den i en Microsoft-inloggningswebbplats där de sedan autentiserar med ett Azure Active Directory (AAD)-konto.</span><span class="sxs-lookup"><span data-stu-id="fae42-215">This authentication flow passes the user a token to paste into a Microsoft sign-in site, where they then authenticate with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="fae42-216">Den här autentiseringsmetoden har stöd för konton som har multifaktorautentisering aktiverat, till skillnad från vanlig autentisering med användarnamn/lösenord.</span><span class="sxs-lookup"><span data-stu-id="fae42-216">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="fae42-217">Skapa en [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig)-authorizer med funktionen [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) för att använda autentisering med enhetstoken.</span><span class="sxs-lookup"><span data-stu-id="fae42-217">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="fae42-218">Anropa [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) på det resulterande objektet för att starta autentiseringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="fae42-218">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="fae42-219">Enhetens flödesautentisering blockerar programkörningen tills hela autentiseringsflödet är klart.</span><span class="sxs-lookup"><span data-stu-id="fae42-219">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="fae42-220">Använd en autentiseringsklient</span><span class="sxs-lookup"><span data-stu-id="fae42-220">Use an authentication client</span></span>

<span data-ttu-id="fae42-221">Om du måste använda en viss typ av autentisering och kan göra så att programmet läser in autentiseringsuppgifter från användaren kan du använda alla klienter som överensstämmer med gränssnittet [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="fae42-221">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="fae42-222">Använd en typ som implementerar det här gränssnittet när du:</span><span class="sxs-lookup"><span data-stu-id="fae42-222">Use a type that implements this interface when you:</span></span>

* <span data-ttu-id="fae42-223">Skriver ett interaktivt program.</span><span class="sxs-lookup"><span data-stu-id="fae42-223">Write an interactive program</span></span>
* <span data-ttu-id="fae42-224">Använder specialiserade konfigurationsfiler.</span><span class="sxs-lookup"><span data-stu-id="fae42-224">Use specialized configuration files</span></span>
* <span data-ttu-id="fae42-225">Har ett krav som förhindrar användning av en inbyggd autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="fae42-225">Have a requirement that prevents using a built-in authentication method</span></span>

> [!WARNING]
> <span data-ttu-id="fae42-226">Hårdkoda aldrig Azure-autentiseringsuppgifter i ett program.</span><span class="sxs-lookup"><span data-stu-id="fae42-226">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="fae42-227">Om du lägger in hemligheter i ett programs binärfiler blir det enklare för en angripare att extrahera dem, oavsett om programmet körs eller inte.</span><span class="sxs-lookup"><span data-stu-id="fae42-227">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="fae42-228">Alla Azure-resurser som autentiseringsuppgifterna har behörighet för utsätts då för risk!</span><span class="sxs-lookup"><span data-stu-id="fae42-228">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="fae42-229">I följande tabell visas typerna i SDK som överensstämmer med gränssnittet `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="fae42-229">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="fae42-230">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="fae42-230">Authentication type</span></span> | <span data-ttu-id="fae42-231">Authorizer-typ</span><span class="sxs-lookup"><span data-stu-id="fae42-231">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="fae42-232">Certifikatbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="fae42-232">Certificate-based authentication</span></span> | <span data-ttu-id="fae42-233">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="fae42-233">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="fae42-234">Klientautentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="fae42-234">Client credentials</span></span> | <span data-ttu-id="fae42-235">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="fae42-235">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="fae42-236">Hanterade identiteter för Azure-resurser</span><span class="sxs-lookup"><span data-stu-id="fae42-236">Managed identities for Azure resources</span></span> | <span data-ttu-id="fae42-237">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="fae42-237">[MSIConfig]</span></span> |
| <span data-ttu-id="fae42-238">Användarnamn/lösenord</span><span class="sxs-lookup"><span data-stu-id="fae42-238">Username/password</span></span> | <span data-ttu-id="fae42-239">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="fae42-239">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="fae42-244">Skapa en autentiserare med dess associerade `New`-funktion och anropa sedan `Authorize` på det resulterande objektet för att autentisera.</span><span class="sxs-lookup"><span data-stu-id="fae42-244">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to authenticate.</span></span> <span data-ttu-id="fae42-245">För att till exempel använda certifikatbaserad autentisering:</span><span class="sxs-lookup"><span data-stu-id="fae42-245">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
