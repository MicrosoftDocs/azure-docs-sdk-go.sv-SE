---
title: Autentisering med Azure SDK för Go
description: Lär dig mer om autentiseringsmetoder som är tillgängliga i Azure SDK för Go och hur de används.
services: azure
author: sptramer
ms.author: sttramer
ms.date: 04/03/2018
ms.topic: article
ms.service: azure
ms.devlang: go
manager: carmonm
ms.openlocfilehash: 39f9dc5a7cdf9ab84cfd9264446bacb31392ca80
ms.sourcegitcommit: 59d2b4c9d8da15fbbd15e36551093219fdaf256e
ms.translationtype: HT
ms.contentlocale: sv-SE
ms.lasthandoff: 04/18/2018
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="9fb3c-103">Autentiseringsmetoder i Azure SDK för Go</span><span class="sxs-lookup"><span data-stu-id="9fb3c-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="9fb3c-104">Azure SDK för Go erbjuder en mängd olika typer av autentisering och autentiseringsmetoder som du kan använda i ditt program.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="9fb3c-105">Autentiseringsmetoderna som stöds sträcker sig från att hämta information från miljövariabler till interaktiv webbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="9fb3c-106">Den här artikeln ger dig en introduktion till tillgängliga typer av autentisering i SDK, och olika metoder för att använda dem.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="9fb3c-107">Du får också metodtips för att välja vilken typ av autentisering som passar ditt program.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="9fb3c-108">Tillgängliga autentiseringstyper och metoder</span><span class="sxs-lookup"><span data-stu-id="9fb3c-108">Available authentication types and methods</span></span>

<span data-ttu-id="9fb3c-109">Azure SDK för Go erbjuder flera olika typer av autentisering som använder olika uppsättningar autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="9fb3c-110">Var och en av de här autentiseringstyperna är tillgängliga via olika autentiseringsmetoder. Det är så SDK tar de här autentiseringsuppgifterna som indata.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="9fb3c-111">I följande tabell beskrivs de tillgängliga typerna av autentisering och situationer där de rekommenderas att användas av ditt program.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="9fb3c-112">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="9fb3c-112">Authentication type</span></span> | <span data-ttu-id="9fb3c-113">Rekommenderas när...</span><span class="sxs-lookup"><span data-stu-id="9fb3c-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="9fb3c-114">Certifikatbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="9fb3c-114">Certificate-based authentication</span></span> | <span data-ttu-id="9fb3c-115">Du har ett X509-certifikat som har konfigurerats för en användare av Azure Active Directory (AAD) eller tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="9fb3c-116">Läs [Komma igång med certifikatbaserad autentisering i Azure Active Directory] för att lära dig mer.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="9fb3c-117">Klientautentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="9fb3c-117">Client credentials</span></span> | <span data-ttu-id="9fb3c-118">Du har ett konfigurerat huvudnamn för tjänsten som har konfigurerats för det här programmet eller en klass av program som det tillhör.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="9fb3c-119">Läs [Skapa Azure-tjänstens huvudnamn med Azure CLI 2.0] för att lära dig mer.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="9fb3c-120">Hanterad tjänstidentitet (MSI)</span><span class="sxs-lookup"><span data-stu-id="9fb3c-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="9fb3c-121">Programmet körs på en Azure-resurs som har konfigurerats med Hanterad tjänstidentitet (MSI).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="9fb3c-122">Läs [Hanterad tjänstidentitet (MSI) för Azure-resurser] för att lära dig mer.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="9fb3c-123">Enhetstoken</span><span class="sxs-lookup"><span data-stu-id="9fb3c-123">Device token</span></span> | <span data-ttu-id="9fb3c-124">Programmet är avsett att __endast__ användas interaktivt och har en mängd olika användare, potentiellt från flera AAD-klientorganisationer.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="9fb3c-125">Användare har åtkomst till en webbläsare för att logga in.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="9fb3c-126">Mer information finns i [Använda autentisering med enhetstoken](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="9fb3c-127">Användarnamn/lösenord</span><span class="sxs-lookup"><span data-stu-id="9fb3c-127">Username/password</span></span> | <span data-ttu-id="9fb3c-128">Du har ett interaktivt program som inte kan använda någon annan autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="9fb3c-129">Användarna har inte aktiverat multifaktorautentisering för sin AAD-inloggning.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="9fb3c-130">Om du använder en autentiseringstyp som skiljer sig från klientens autentiseringsuppgifter måste programmet registreras i Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="9fb3c-131">Läs [Integrera program med Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications) för att lära dig hur.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="9fb3c-132">Om du inte har särskilda krav bör du undvika autentisering med användarnamn/lösenord.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="9fb3c-133">I situationer där användarbaserad inloggning är lämpligt används vanligtvis autentisering med enhetstoken i stället.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Komma igång med certifikatbaserad autentisering i Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Skapa Azure-tjänstens huvudnamn med Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Hanterad tjänstidentitet (MSI) för Azure-resurser]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="9fb3c-137">De här typerna av autentisering är tillgängliga via olika metoder.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="9fb3c-138">[_Miljöbaserad autentisering_](#use-environment-based-authentication) läser autentiseringsuppgifter direkt från programmets miljö.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="9fb3c-139">[_Filbaserad autentisering_](#use-file-based-authentication) läser in en fil som innehåller autentiseringsuppgifter för tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="9fb3c-140">[_Klientbaserad autentisering_](#use-an-authentication-client) använder ett objekt i Go-kod och gör att du ansvarar för att tillhandahålla autentiseringsuppgifterna när programmet körs.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="9fb3c-141">Slutligen finns även [_Autentisering med enhetstoken_](#use-device-token-authentication) som kräver att användarna loggar in interaktivt via en webbläsare med en token och som inte kan användas med miljö- eller filbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="9fb3c-142">Alla autentiseringsfunktioner och -typer är tillgängliga i paketet `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb3c-143">Om du inte har särskilda krav bör du undvika klientbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="9fb3c-144">Den här metoden för autentisering uppmanar användarna att använda dåliga metoder.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="9fb3c-145">I synnerhet gör klientbaserad autentisering det lockande att hårdkoda autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="9fb3c-146">Att skriva anpassad kod för autentisering kan också sluta fungera efter att kommande SDK-versioner har släppts om de ändrar kraven för autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="9fb3c-147">Använda miljö för autentisering</span><span class="sxs-lookup"><span data-stu-id="9fb3c-147">Use environment-based authentication</span></span>

<span data-ttu-id="9fb3c-148">Om du kör programmet i en strikt kontrollerad miljö som i en behållare är miljöbaserad autentisering är det naturliga valet.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="9fb3c-149">Du kan konfigurera gränssnittsmiljön innan du kör ditt program och Go SDK läser dessa miljövariabler vid körning för att autentisera med Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="9fb3c-150">Miljöbaserad autentisering har stöd för alla autentiseringsmetoder förutom enhetstoken och utvärderas i följande ordning: Klientens autentiseringsuppgifter, certifikat, användarnamn/lösenord och hanterad tjänstidentitet (MSI).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="9fb3c-151">Om en miljövariabel som krävs är odefinierad eller om SDK blir nekad av autentiseringstjänsten används nästa autentiseringstyp.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="9fb3c-152">Om SDK inte kan autentisera från miljön returneras ett fel.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="9fb3c-153">I följande tabell beskrivs miljövariabler som måste anges för varje autentiseringstyp som stöds av miljöbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="9fb3c-154">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="9fb3c-154">Authentication type</span></span> | <span data-ttu-id="9fb3c-155">Miljövariabel</span><span class="sxs-lookup"><span data-stu-id="9fb3c-155">Environment variable</span></span> | <span data-ttu-id="9fb3c-156">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9fb3c-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="9fb3c-157">__Klientautentiseringsuppgifter__</span><span class="sxs-lookup"><span data-stu-id="9fb3c-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9fb3c-158">ID för Active Directory-klientorganisationen som tjänstens huvudnamn tillhör.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9fb3c-159">Namn eller ID för tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="9fb3c-160">Hemligheten som är associerad med tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="9fb3c-161">__Certifikat__</span><span class="sxs-lookup"><span data-stu-id="9fb3c-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9fb3c-162">ID för Active Directory-klientorganisationen som certifikatet är registrerat i.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9fb3c-163">Programmets klient-ID som är associerat med certifikatet.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="9fb3c-164">Sökvägen till klientcertifikatfilen.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="9fb3c-165">Lösenordet för klientcertifikatet.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="9fb3c-166">__Användarnamn/lösenord__</span><span class="sxs-lookup"><span data-stu-id="9fb3c-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="9fb3c-167">ID för Active Directory-klientorganisationen som användaren tillhör.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="9fb3c-168">Programmets klients-ID.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="9fb3c-169">Användarnamnet som används för att logga in.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="9fb3c-170">Lösenordet som används för att logga in.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-170">The password to log in with.</span></span> |
| <span data-ttu-id="9fb3c-171">__MSI__</span><span class="sxs-lookup"><span data-stu-id="9fb3c-171">__MSI__</span></span> | | <span data-ttu-id="9fb3c-172">MSI kräver inte att några autentiseringsuppgifter anges.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="9fb3c-173">Programmet måste köras på en Azure-resurs konfigurerad för att använda MSI.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="9fb3c-174">Mer information finns i [Hanterad tjänstidentitet (MSI) för Azure-resurser].</span><span class="sxs-lookup"><span data-stu-id="9fb3c-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="9fb3c-175">Om du behöver ansluta till ett moln eller en hanteringsslutpunkt annat än det offentliga Azure-moln som är standard kan du även ange följande miljövariabler.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="9fb3c-176">De vanligaste orsakerna att ange dem är om du använder Azure Stack, ett moln i en annan geografisk region eller Azures klassiska distributionsmodell.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="9fb3c-177">Miljövariabel</span><span class="sxs-lookup"><span data-stu-id="9fb3c-177">Environment variable</span></span> | <span data-ttu-id="9fb3c-178">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9fb3c-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="9fb3c-179">Namnet på molnmiljön som användaren ska ansluta till.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="9fb3c-180">Resurs-ID för Active Directory som ska användas vid anslutning.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="9fb3c-181">Det här bör vara en URI som pekar på hanteringsslutpunkten.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="9fb3c-182">När du använder miljöbaserad autentisering anropar du funktionen [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) för att hämta ditt authorizer-objekt.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="9fb3c-183">Det här objektet konfigureras i egenskapen `Authorizer` för klienter för att ge dem åtkomst till Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

## <a name="use-file-based-authentication"></a><span data-ttu-id="9fb3c-184">Använd filbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="9fb3c-184">Use file-based authentication</span></span>

<span data-ttu-id="9fb3c-185">Filbaserad autentisering fungerar endast med klientens autentiseringsuppgifter när de lagras i ett lokal filformat som genererats av [Azure CLI 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-185">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="9fb3c-186">Du kan enkelt skapa den här filen när du skapar en ny tjänstens huvudnamn med parametern `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-186">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="9fb3c-187">Se till att det här argumentet anges när du skapar ett huvudnamn för tjänsten om du tänker använda filbaserad autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-187">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="9fb3c-188">Eftersom CLI skriver utdata till `stdout` kan du dirigera om utdata till en fil.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-188">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="9fb3c-189">Ange miljövariabeln `AZURE_AUTH_LOCATION` till platsen där auktoriseringsfilen lagras.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-189">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="9fb3c-190">Den här miljövariabeln läses av programmet och autentiseringsuppgifterna i den parsas.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-190">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="9fb3c-191">Om du måste välja auktoriseringsfilen vid körning kan du ändra programmets miljö med hjälp av funktionen [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-191">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="9fb3c-192">För att läsa in autentiseringsinformationen anropar du funktionen [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-192">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="9fb3c-193">Till skillnad från miljöbaserad auktorisering kräver filbaserad auktorisering en resursslutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-193">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="9fb3c-194">Läs mer om att använda tjänstens huvudnamn och att hanteras dess åtkomstbehörigheter i [Skapa Azure-tjänstens huvudnamn med Azure CLI 2.0].</span><span class="sxs-lookup"><span data-stu-id="9fb3c-194">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="9fb3c-195">Använda autentisering med enhetstoken</span><span class="sxs-lookup"><span data-stu-id="9fb3c-195">Use device token authentication</span></span>

<span data-ttu-id="9fb3c-196">Om du vill att användarna ska logga in interaktivt är det bästa sättet att erbjuda den funktionen via autentisering med enhetstoken.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-196">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="9fb3c-197">Med det här autentiseringsflödet skickas en token till användaren som sedan klistrar in den i en Microsoft-inloggningswebbplats där de sedan loggar in med ett Azure Active Directory (AAD)-konto.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-197">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="9fb3c-198">Den här autentiseringsmetoden har stöd för konton som har multifaktorautentisering aktiverat, till skillnad från vanlig autentisering med användarnamn/lösenord.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-198">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="9fb3c-199">Skapa en [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig)-authorizer med funktionen [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) för att använda autentisering med enhetstoken.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-199">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="9fb3c-200">Anropa [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) på det resulterande objektet för att starta autentiseringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-200">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="9fb3c-201">Enhetens flödesautentisering blockerar programkörningen tills hela autentiseringsflödet är klart.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-201">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="9fb3c-202">Använd en autentiseringsklient</span><span class="sxs-lookup"><span data-stu-id="9fb3c-202">Use an authentication client</span></span>

<span data-ttu-id="9fb3c-203">Om du måste använda en viss typ av autentisering och kan göra så att programmet läser in autentiseringsuppgifter från användaren kan du använda alla klienter som överensstämmer med gränssnittet [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="9fb3c-203">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="9fb3c-204">Använd en typ som implementerar det här gränssnittet om du vill använda ett interaktivt program, använda specialiserade konfigurationsfiler eller om du har ett krav som förhindrar dig från att använda en annan autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-204">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="9fb3c-205">Hårdkoda aldrig Azure-autentiseringsuppgifter i ett program.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-205">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="9fb3c-206">Om du lägger in hemligheter i ett programs binärfiler blir det enklare för en angripare att extrahera dem, oavsett om programmet körs eller inte.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-206">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="9fb3c-207">Alla Azure-resurser som autentiseringsuppgifterna har behörighet för utsätts då för risk!</span><span class="sxs-lookup"><span data-stu-id="9fb3c-207">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="9fb3c-208">I följande tabell visas typerna i SDK som överensstämmer med gränssnittet `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-208">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="9fb3c-209">Autentiseringstyp</span><span class="sxs-lookup"><span data-stu-id="9fb3c-209">Authentication type</span></span> | <span data-ttu-id="9fb3c-210">Authorizer-typ</span><span class="sxs-lookup"><span data-stu-id="9fb3c-210">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="9fb3c-211">Certifikatbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="9fb3c-211">Certificate-based authentication</span></span> | <span data-ttu-id="9fb3c-212">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="9fb3c-212">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="9fb3c-213">Klientautentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="9fb3c-213">Client credentials</span></span> | <span data-ttu-id="9fb3c-214">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="9fb3c-214">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="9fb3c-215">Hanterad tjänstidentitet (MSI)</span><span class="sxs-lookup"><span data-stu-id="9fb3c-215">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="9fb3c-216">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="9fb3c-216">[MSIConfig]</span></span> |
| <span data-ttu-id="9fb3c-217">Användarnamn/lösenord</span><span class="sxs-lookup"><span data-stu-id="9fb3c-217">Username/password</span></span> | <span data-ttu-id="9fb3c-218">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="9fb3c-218">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="9fb3c-223">Skapa en autentiserare med dess associerade `New`-funktion och anropa sedan `Authorize` på det resulterande objektet för att utföra autentisering.</span><span class="sxs-lookup"><span data-stu-id="9fb3c-223">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="9fb3c-224">För att till exempel använda certifikatbaserad autentisering:</span><span class="sxs-lookup"><span data-stu-id="9fb3c-224">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
